<md-toolbar class="toolbar">Rechnungstool</md-toolbar>

<div id="leftContainer">
  <md-card>
    <md-card-title-group>
      <md-card-title>Fahrten</md-card-title>
      <md-card-subtitle>Rechnungsnummer: {{billService.bill._id}}</md-card-subtitle>
    </md-card-title-group>
    <md-card-content>
      <table id="table" class="table table-hover table-striped table-mc-light-green">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Abholungsort</th>
            <th>Abgabeort</th>
            <th>Typ</th>
            <th>Fahrgestellnr.</th>
            <th>Betrag</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let journey of billService.journeys; let i = index">
            <td>{{journey?.date | date:'dd.MM.yy'}}</td>
            <td>{{journey?.start}}</td>
            <td>{{journey?.end}}</td>
            <td>{{journey?.type}}</td>
            <td>{{journey?.number}}</td>
            <td>{{journey?.amount}} €</td>
            <td>
              <button (click)="billService.editJourney(journey, i)">Ändern</button>
              <button (click)="billService.deleteJourney(journey)">Löschen</button>
            </td>
          </tr>
      </table>
    </md-card-content>
    <md-card-actions fxLayout fxLayoutAlign="center center">
      <button md-button (click)="billService.newBill()">Neue Rechnung</button>
    </md-card-actions>
  </md-card>
</div>

<div id="rightContainer">
  <md-card id="leftEingabe">
    <md-card-title-group>
      <md-card-title *ngIf="!billService.edit">Fahrt hinzufügen</md-card-title>
      <md-card-title *ngIf="billService.edit">Fahrt Editieren</md-card-title>
    </md-card-title-group>
    <md-card-content *ngIf="billService.journey">
      <md-input-container>
        <input type="date" mdInput placeholder="Datum" [(ngModel)]="billService.journey.date">
      </md-input-container><br>
      <md-input-container>
        <input mdInput placeholder="Start" [(ngModel)]="billService.journey.start">
      </md-input-container>
      <md-input-container fxflex>
        <input mdInput placeholder="Abgabe" [(ngModel)]="billService.journey.end">
      </md-input-container> <br>
      <md-input-container fxflex>
        <input mdInput placeholder="Typ" [(ngModel)]="billService.journey.type">
      </md-input-container>
      <md-input-container fxflex>
        <input mdInput placeholder="Fahrgestell"  [(ngModel)]="billService.journey.number">
      </md-input-container>
      <md-input-container fxflex>
        <input type="number" mdInput placeholder="Betrag" [(ngModel)]="billService.journey.amount">
      </md-input-container>
    </md-card-content>
    <md-card-actions *ngIf="!billService.edit" fxLayout fxLayoutAlign="center center">
      <button md-button (click)="billService.saveJourney()">Hinzufügen</button>
      <button md-button (click)="billService.newJourney()">Abbrechen</button>
    </md-card-actions>
    <md-card-actions *ngIf="billService.edit" fxLayout fxLayoutAlign="center center">
      <button md-button (click)="billService.saveJourney()">Ändern</button>
      <button md-button (click)="billService.newJourney()">Abbrechen</button>
    </md-card-actions>
  </md-card>

  <md-card id="rightEingabe">
    <md-card-title-group>
      <md-card-title>Rechnungsdaten</md-card-title>

    </md-card-title-group>
    <md-card-content>
      Rechnungsnummer: {{billService.bill.reNr}}
      <app-customer-editor ></app-customer-editor>
      
    </md-card-content>
  </md-card>
</div>

<md-list>
  <h3 md-subheader>Rechnungen</h3>
  <md-list-item *ngFor="let bill of billService.bills">
    <md-icon md-list-avatar (click)="billChooser(bill.doc)">folder</md-icon>
    <h4 md-line (click)="billChooser(bill.doc)">{{bill.doc._id | date:'dd.MM.yy'}}</h4>
    <br> <button md-raised-button (click)="billService.deleteBill(bill.doc)">Entfernen</button>

  </md-list-item>

</md-list>